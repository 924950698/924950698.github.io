<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å‰ç«¯è‡ªåŠ¨åŒ–ã€æºç é“¾æ¥ã€‘ | ğŸš² Allan_Liuçš„åšå®¢</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/images/logo.jpeg">
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.4c261fea.css" as="style"><link rel="preload" href="/assets/js/app.c845f69d.js" as="script"><link rel="preload" href="/assets/js/2.bd4d3fea.js" as="script"><link rel="preload" href="/assets/js/1.09a35a94.js" as="script"><link rel="preload" href="/assets/js/44.766d7dcf.js" as="script"><link rel="prefetch" href="/assets/js/10.3c1f4dbc.js"><link rel="prefetch" href="/assets/js/11.86c6b75e.js"><link rel="prefetch" href="/assets/js/12.b692ab6d.js"><link rel="prefetch" href="/assets/js/13.89152e51.js"><link rel="prefetch" href="/assets/js/14.3f82c5b2.js"><link rel="prefetch" href="/assets/js/15.efa3dd7b.js"><link rel="prefetch" href="/assets/js/16.7e64b4c0.js"><link rel="prefetch" href="/assets/js/17.a3208ce1.js"><link rel="prefetch" href="/assets/js/18.2a8dc9f3.js"><link rel="prefetch" href="/assets/js/19.b75373c3.js"><link rel="prefetch" href="/assets/js/20.8a7b5ffe.js"><link rel="prefetch" href="/assets/js/21.23712926.js"><link rel="prefetch" href="/assets/js/22.d9e9de88.js"><link rel="prefetch" href="/assets/js/23.4f072c45.js"><link rel="prefetch" href="/assets/js/24.6a47a6f2.js"><link rel="prefetch" href="/assets/js/25.dc6ee98d.js"><link rel="prefetch" href="/assets/js/26.91e87287.js"><link rel="prefetch" href="/assets/js/27.90de9f42.js"><link rel="prefetch" href="/assets/js/28.9bbaffc9.js"><link rel="prefetch" href="/assets/js/29.fdd39a7e.js"><link rel="prefetch" href="/assets/js/3.93fe82d5.js"><link rel="prefetch" href="/assets/js/30.13c379b1.js"><link rel="prefetch" href="/assets/js/31.d0429199.js"><link rel="prefetch" href="/assets/js/32.d9043821.js"><link rel="prefetch" href="/assets/js/33.f799af7d.js"><link rel="prefetch" href="/assets/js/34.f51bb7bf.js"><link rel="prefetch" href="/assets/js/35.39e345f9.js"><link rel="prefetch" href="/assets/js/36.aa43cd26.js"><link rel="prefetch" href="/assets/js/37.36a1d98f.js"><link rel="prefetch" href="/assets/js/38.2a8a1217.js"><link rel="prefetch" href="/assets/js/39.33da9def.js"><link rel="prefetch" href="/assets/js/4.4eace7ce.js"><link rel="prefetch" href="/assets/js/40.b8801ade.js"><link rel="prefetch" href="/assets/js/41.12fbf8f9.js"><link rel="prefetch" href="/assets/js/42.001810ee.js"><link rel="prefetch" href="/assets/js/43.29166118.js"><link rel="prefetch" href="/assets/js/45.b56762cd.js"><link rel="prefetch" href="/assets/js/46.7f0234f8.js"><link rel="prefetch" href="/assets/js/47.a9009693.js"><link rel="prefetch" href="/assets/js/48.bed03c9d.js"><link rel="prefetch" href="/assets/js/49.1e4801ab.js"><link rel="prefetch" href="/assets/js/5.b5753bf2.js"><link rel="prefetch" href="/assets/js/50.081730bd.js"><link rel="prefetch" href="/assets/js/51.fc80b56e.js"><link rel="prefetch" href="/assets/js/52.8af24c4d.js"><link rel="prefetch" href="/assets/js/53.dd164be9.js"><link rel="prefetch" href="/assets/js/54.acf949bd.js"><link rel="prefetch" href="/assets/js/55.8215a637.js"><link rel="prefetch" href="/assets/js/56.7ff46e18.js"><link rel="prefetch" href="/assets/js/57.ec65459c.js"><link rel="prefetch" href="/assets/js/58.5a112567.js"><link rel="prefetch" href="/assets/js/59.ed7a226c.js"><link rel="prefetch" href="/assets/js/6.a8123c81.js"><link rel="prefetch" href="/assets/js/60.ec6fc9a9.js"><link rel="prefetch" href="/assets/js/61.8b05b1e1.js"><link rel="prefetch" href="/assets/js/62.7a76dcf6.js"><link rel="prefetch" href="/assets/js/63.2cbb4ae2.js"><link rel="prefetch" href="/assets/js/64.1b8feeef.js"><link rel="prefetch" href="/assets/js/65.ca37e2a1.js"><link rel="prefetch" href="/assets/js/66.6a7496b6.js"><link rel="prefetch" href="/assets/js/67.b7d45fc1.js"><link rel="prefetch" href="/assets/js/68.6f088643.js"><link rel="prefetch" href="/assets/js/69.773e378d.js"><link rel="prefetch" href="/assets/js/7.e76ff1de.js"><link rel="prefetch" href="/assets/js/70.fd09d386.js"><link rel="prefetch" href="/assets/js/71.fb9d636e.js"><link rel="prefetch" href="/assets/js/72.09d8edd1.js"><link rel="prefetch" href="/assets/js/73.c5f5493e.js"><link rel="prefetch" href="/assets/js/74.bc32d914.js"><link rel="prefetch" href="/assets/js/75.ddb96f73.js"><link rel="prefetch" href="/assets/js/76.8bc4cd14.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.9f962556.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4c261fea.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ğŸš² Allan_Liuçš„åšå®¢</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  ä¸»é¡µ
</a></div> <a href="https://github.com/924950698" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  ä¸»é¡µ
</a></div> <a href="https://github.com/924950698" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>pythonç¯‡</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/python/study.html" class="sidebar-link">pythonè¯­è¨€ç›¸å…³é…ç½®</a></li><li><a href="/guide/python/pyapi.html" class="sidebar-link">pythonè¯­è¨€å¸¸ç”¨api</a></li><li><a href="/guide/python/pymethods.html" class="sidebar-link">pythonè¯­è¨€å¸¸ç”¨å‡½æ•°</a></li><li><a href="/guide/python/pyfile.html" class="sidebar-link">`</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="å‰ç«¯è‡ªåŠ¨åŒ–ã€æºç é“¾æ¥ã€‘"><a href="#å‰ç«¯è‡ªåŠ¨åŒ–ã€æºç é“¾æ¥ã€‘" class="header-anchor">#</a> å‰ç«¯è‡ªåŠ¨åŒ–ã€<a href="https://github.com/924950698/autoTest" target="_blank" rel="noopener noreferrer">æºç é“¾æ¥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‘</h1> <h2 id="_1-1-ç®€ä»‹-ä»€ä¹ˆæ˜¯å‰ç«¯è‡ªåŠ¨åŒ–"><a href="#_1-1-ç®€ä»‹-ä»€ä¹ˆæ˜¯å‰ç«¯è‡ªåŠ¨åŒ–" class="header-anchor">#</a> 1-1 ç®€ä»‹ï¼šä»€ä¹ˆæ˜¯å‰ç«¯è‡ªåŠ¨åŒ–ï¼Ÿ</h2> <p>é˜²æ­¢bugäº§ç”Ÿï¼›å¸¦åˆ°çº¿ä¸Šé€ æˆæ›´å¤§çš„æŸå¤±ï¼›<br>å½“å‰å¸‚åœºä¸Šæµè¡Œçš„TypeScriptï¼Œ Eslintï¼Œ flowï¼Œ styleLintå¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜ä»£ç è´¨é‡ï¼Œä½†æ˜¯è¿˜ä¸å¤Ÿã€‚ä½œä¸ºå‰ç«¯ï¼Œå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•å¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜ä»£ç çš„è´¨é‡ã€‚è‡ªåŠ¨åŒ–æµ‹è¯•åœ¨åç«¯å·²ç»æ¯”è¾ƒæ™®éäº†ï¼Œä½†æ˜¯åœ¨å‰ç«¯æ™®åŠçš„è¿˜æ¯”è¾ƒå°‘ã€‚<br>æœ¬æ¬¡åªä½œ3ç§æµ‹è¯•çš„è®²è§£ï¼š</p> <ol><li>å•å…ƒæµ‹è¯• (ç™½ç›’-çŸ¥é“ä»£ç é€»è¾‘ï¼Œå†™ä»£ç æ¥æµ‹è¯•ï¼›æµ‹è¯•æ–¹æ³•å‡½æ•°)(æ³¨ï¼šé»‘ç›’æµ‹è¯•ï¼šä¸çŸ¥é“ä»£ç é€»è¾‘ï¼Œé€šè¿‡ç‚¹å‡»åŠŸèƒ½å»æµ‹è¯•)</li> <li>é›†æˆæµ‹è¯•</li> <li>End to End (ç«¯åˆ°ç«¯æµ‹è¯•)</li></ol> <h2 id="_2-2-æ­£æ–‡-è‡ªåŠ¨åŒ–æµ‹è¯•åŸç†"><a href="#_2-2-æ­£æ–‡-è‡ªåŠ¨åŒ–æµ‹è¯•åŸç†" class="header-anchor">#</a> 2-2 æ­£æ–‡: è‡ªåŠ¨åŒ–æµ‹è¯•åŸç†</h2> <h3 id="_1-å•å…ƒæµ‹è¯•"><a href="#_1-å•å…ƒæµ‹è¯•" class="header-anchor">#</a> 1. å•å…ƒæµ‹è¯•</h3> <ol><li>åˆ›å»ºindex.htmlï¼Œmath.js, math.test.jsä¸‰ä¸ªæ–‡ä»¶</li> <li>åœ¨math.jsä¸­åˆ›å»ºä¸¤ä¸ªå‡½æ•°æ–¹æ³•ï¼Œå¹¶åœ¨index.htmlä¸­å¼•å…¥math.js</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>    function add(a, b) {
        return a + b;
    }

    function minus(a, b) {
        return a * b;
    }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="3"><li>åœ¨math.test.jsä¸­åµŒå…¥æµ‹è¯•ä»£ç :</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>    var result = add(3, 7);
    var expected = 10; 

    if(result !== 10) {
        throw Error(`3 + 7 åº”è¯¥ç­‰äº ${expected}, ä½†æ˜¯å´æ˜¯${retult}`);
    }

    var result = minus(3, 3);
    var expected = 0;

    if(result !== 0) {
        throw Error(` 3 - 3 åº”è¯¥ç­‰äº${expected}, ä½†æ˜¯å´æ˜¯${result} `);
    }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="4"><li>éªŒè¯ï¼šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€index.htmlæ–‡ä»¶ï¼Œåœ¨æ§åˆ¶å°ä¸­å¯ä»¥è¾“å…¥add æˆ–è€… minuså¹¶å›è½¦å¯ä»¥çœ‹åˆ°è¯¥å‡½æ•°ä½“ï¼›ç„¶åå°†math.test.jsçš„ä»£ç ç²˜è´´åˆ°æ§åˆ¶å°ä¸­ï¼ŒæŒ‰å›è½¦æ‰§è¡Œæµ‹è¯•å‡½æ•°ï¼Œæ˜¾ç¤ºç»“æœï¼š
<img src="https://i.loli.net/2019/11/16/p4T3NgZs2mCALKD.png" alt="å¾®ä¿¡å›¾ç‰‡_20191116224820.png"></li></ol> <p>åœ¨æ§åˆ¶å°ä¸­å¯ä»¥æ˜æ˜¾æ£€æŸ¥åˆ°ï¼Œå‡æ³•å‡½æ•°æŠ¥å‡ºçš„é”™è¯¯ä¿¡æ¯ï¼Œæ–¹ä¾¿å¼€å‘äººå‘˜å¿«é€Ÿä¿®æ”¹ã€‚</p> <ol start="5"><li>æ€è€ƒï¼Œèƒ½ä¸èƒ½å¯¹ä¸Šé¢çš„é‡å¤ä»£ç åšä¸€ä¸ªå°è£…å‘¢ï¼Ÿ</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>// åˆ›ä½œä¸€ç§è¯­æ³•åšæµ‹è¯•
    function expect(result) {
        return {
            toBe: function(actual) {
                if(result !== actual) {
                    throw Error(`å½“å‰å€¼ä¸ç¬¦åˆé¢„æœŸå€¼ï¼Œ é¢„æœŸæ˜¯${actual}ï¼Œç»“æœæ˜¯ ${result}`)
                }
            }
        }
    }

    function test(desc, fn) {
        try {
            fn()
            console.log(`${desc} é€šè¿‡æµ‹è¯•`);
        }catch (e) {
            console.log(`${desc} æ²¡æœ‰é€šè¿‡æµ‹è¯• ${e}`);
        }
    }

    test('æµ‹è¯•åŠ æ³• 3 + 7', () =&gt; {
        expect(add(3, 7)).toBe(10)
    })

    test('æµ‹è¯•å‡æ³• 3 - 3', () =&gt; {
        expect(minus(3, 3)).toBe(10)
    })
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>ç²˜è´´åˆ°æ§åˆ¶å°ä¸­ï¼Œæ˜¾ç¤ºä¸ºï¼š
<img src="https://i.loli.net/2019/11/16/tvRG4hQ7kxAu2TF.png" alt="å¾®ä¿¡å›¾ç‰‡_20191116225647.png"></p> <p>ä¸Šé¢ä»£ç ä¸­ï¼Œå°è£…äº†expectæ–¹æ³•æ¥è¿›è¡Œå€¼æ¯”è¾ƒï¼Œå°è£…äº†testæ–¹æ³•è¡¥å……æµ‹è¯•çš„æè¿°ä¿¡æ¯ã€‚å…¶å®å’Œå½“å‰å¸‚é¢ä¸Šæ¯”è¾ƒä¸»æµçš„æµ‹è¯•æ¡†æ¶Mochaï¼Œ Jesté‡Œé‡Œé¢çš„è¯­æ³•åŸç†éƒ½å·®ä¸å¤šã€‚</p> <ol start="2"><li>é›†æˆæµ‹è¯•</li> <li>End to End (ç«¯åˆ°ç«¯æµ‹è¯•)</li></ol> <h2 id="_2-3-ä½¿ç”¨jestä¿®æ”¹è‡ªåŠ¨åŒ–æµ‹è¯•æ ·ä¾‹"><a href="#_2-3-ä½¿ç”¨jestä¿®æ”¹è‡ªåŠ¨åŒ–æµ‹è¯•æ ·ä¾‹" class="header-anchor">#</a> 2-3 ä½¿ç”¨Jestä¿®æ”¹è‡ªåŠ¨åŒ–æµ‹è¯•æ ·ä¾‹</h2> <ol><li>npm initç”ŸæˆåŒ…å·¥å…·ï¼Œä¸‹è½½jest@14.8.0ç‰ˆæœ¬,package.jsonä¸­scriptå‘½ä»¤testæ›¿æ¢ä¸ºjest</li> <li>å°†math.jsä½œä¸ºä¸€ä¸ªæ¨¡å—å¯¼å‡ºï¼Œ</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>    function add(a, b) {
        return a + b;
    }

    function minus(a, b) {
        return a - b;
    }


    module.exports = {
        add,
        minus
    }

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol start="3"><li>åœ¨math.test.jsä¸­å¼•å…¥æ¨¡å—ï¼š</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>    const math = require(&quot;./math.js&quot;);
    const { add, minus } = math;

    test('æµ‹è¯•åŠ æ³• 3 + 7', () =&gt; {
        expect(add(3, 7)).toBe(10)
    })

    test('æµ‹è¯•å‡æ³• 3 - 3', () =&gt; {
        expect(minus(3, 3)).toBe(0)
    })
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol start="4"><li><p>è¿è¡Œå‘½ä»¤ï¼š npm run test ï¼Œè¿è¡Œæ­£ç¡®æ—¶ç»“æœå¦‚ä¸‹å›¾ï¼š
<img src="https://i.loli.net/2019/11/17/FB8dlSRgC7hcyxI.png" alt="å¾®ä¿¡å›¾ç‰‡_20191117125438.png"> <br>è¿è¡ŒæŠ¥é”™æ—¶å¦‚ä¸‹å›¾ï¼š
<img src="https://i.loli.net/2019/11/17/CfjDyQUrh8e76OJ.png" alt=""></p></li> <li><p>ä¸ºä»€ä¹ˆmath.jså¯¼å‡ºçš„éœ€è¦æ—¶ä¸€ä¸ªæ¨¡å—ï¼Ÿ<br>
å› ä¸ºjestæ¡†æ¶åœ¨å‰ç«¯å¸®åŠ©æˆ‘ä»¬å®Œæˆçš„æ˜¯ä¸¤ç±»çš„å†…å®¹ï¼šå•å…ƒæµ‹è¯•ï¼ˆå•ä¸ªæ¨¡å—æµ‹è¯•ï¼‰ï¼Œ é›†æˆæµ‹è¯•ï¼ˆå¤šä¸ªæ¨¡å—æµ‹è¯•ï¼‰ï¼›å¿…é¡»è¦æŠŠmath.jsæ”¹é€ æˆä¸€ä¸ªæ¨¡å—ï¼Œæ‰èƒ½ç¬¦åˆjestä¸¤å¤§æµ‹è¯•ç±»å‹çš„è¦æ±‚ã€‚</p></li></ol> <h2 id="_2-4-jestç®€å•é…ç½®"><a href="#_2-4-jestç®€å•é…ç½®" class="header-anchor">#</a> 2-4 Jestç®€å•é…ç½®</h2> <ol><li>JeståŒ…å«é»˜è®¤é…ç½®ï¼Œè¦æ›´æ”¹ç°æœ‰é…ç½®ï¼Œä½¿å…¶æ›´åŠ ä¸°å¯Œã€‚ç±»ä¼¼WebPack</li> <li><code>npx jest --init</code> è¿›è¡Œä¸€ä¸ªåˆå§‹åŒ–ã€‚ä¹‹åä¼šå‡ºç°ï¼šæ˜¯å¦é€‰æ‹©jsdomç¯å¢ƒï¼›ä»£ç è¦†ç›–ç‡æŠ¥å‘Šï¼›è‡ªåŠ¨æ¸…é™¤äº‹ä»¶ã€‚å®Œæˆä»¥åå‡ºç°jest.config.jsæ–‡ä»¶ï¼ˆå¸¸ç”¨çš„jesté…ç½®éƒ½åœ¨è¿™é‡Œï¼‰ã€‚
å°†ä»£ç è¦†ç›–ç‡æŠ¥å‘Šæ”¾åœ¨coverageç›®å½•ä¸‹</li></ol> <h4 id="_1-codeä»£ç è¦†ç›–ç‡"><a href="#_1-codeä»£ç è¦†ç›–ç‡" class="header-anchor">#</a> 1. codeä»£ç è¦†ç›–ç‡</h4> <p>æ‰§è¡Œ<code>npx jest --coverage</code>ç”Ÿæˆä»£ç è¦†ç›–ç‡æŠ¥å‘Šã€‚
<img src="https://i.loli.net/2019/11/18/qciu1avmgX6h4TW.png" alt="å¾®ä¿¡å›¾ç‰‡_20191118155550.png"></p> <p>ä¼šç”Ÿæˆä¸€ä¸ªcoverageç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹æœ‰ä¸€ä¸ªindex.htmlæ–‡ä»¶ã€‚æ‰“å¼€è¯¥æ–‡ä»¶åï¼Œå¯ä»¥ç›´è§‚çš„çœ‹åˆ°å½“å‰ä»£ç è¦†ç›–ç‡æ˜¯100%ï¼Œ
<img src="https://i.loli.net/2019/11/18/YNeUnKuBPXT5F3o.png" alt="å¾®ä¿¡å›¾ç‰‡_20191118155556.png">
3. jest.config.jsä¸­çš„coverageDirectoryå¯ä»¥æ›´æ”¹æ‰“åŒ…æŠ¥å‘Šç›®å½•çš„åå­—ã€‚å¦å¤–ä¹Ÿå¯ä»¥åœ¨package.jsonä¸­å°†å‘½ä»¤æ›¿æ¢æˆ<code>coverage: jest --coverage</code>,ä¹‹ååœ¨æ‰§è¡Œnpm run coverageå°±ç”Ÿäº§codeæµ‹è¯•æŠ¥å‘Šäº†ã€‚<br>
4. åœ¨é¡¹ç›®ä¸­ä½¿ç”¨Esmoduleè¯­æ³•å¯¹æ¨¡å—è¿›è¡Œå¯¼å‡ºå’Œä½¿ç”¨ï¼Œä½†æ˜¯åœ¨nodeç¯å¢ƒä¸‹ä¸æ”¯æŒï¼Œéœ€è¦ä½¿ç”¨babelè½¬æˆcommonJsçš„ä»£ç ã€‚<br>
5. ä¸‹è½½babelç‰ˆæœ¬ï¼š<code>npm install @babel/core@7.4.5 @babel/preset-env@7.4.5 -D</code>ã€‚ä½¿ç”¨babelæ—¶å¯¹babelè¿›è¡Œé…ç½®ï¼Œåˆ›å»º.babelrcæ–‡ä»¶ï¼Œåœ¨é‡Œé¢å†™</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
    &quot;presets&quot;: [
        [&quot;@babel/preset-env&quot;, {
            &quot;targets&quot;: {
                &quot;node&quot;: &quot;current&quot;
            }
        }]
    ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>å«ä¹‰ï¼šå½“å‰nodeç¯å¢ƒä¸æ”¯æŒimportè¯­å¥ï¼Œä½¿ç”¨<code>@babel/preset-env</code>å¯¹importè¯­å¥è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢æˆcommenJSè¯­æ³•ï¼Œnodeå’ŒJestå°±å¯ä»¥è¯†åˆ«äº†ã€‚<br>
6. æ‰§è¡Œnpm run jeståï¼Œjestå†…éƒ¨é›†æˆäº†babel-jestæ’ä»¶ï¼Œå®ƒä¼šæ£€æµ‹å½“å‰ç¯å¢ƒæ˜¯å¦å®‰è£…äº†babel-coreï¼Œ<br>å¦‚æœæœ‰ï¼Œå°±ä¼šå»å–.babelreé…ç½®ã€‚<br>åœ¨è¿è¡Œæµ‹è¯•ä¹‹å‰ï¼Œç»“åˆbabelï¼Œå…ˆæŠŠä»£ç åšä¸€æ¬¡è½¬æ¢<br>è¿è¡Œè½¬åŒ–è¿‡çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå°±ç¬¦åˆcommonJsè§„èŒƒ</p> <ol start="7"><li>å¤§å®¶å¦‚æœæƒ³äº†è§£æ›´å¤šï¼Œå¯ä»¥å»<a href="https://jestjs.io/docs/en/getting-started.html" target="_blank" rel="noopener noreferrer">Jestå®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>çœ‹ä¸€ä¸‹ï¼Œæœ‰è¯¦ç»†çš„é…ç½®ä»‹ç»è¯´æ˜å’Œä¸tsçš„ç»“åˆã€‚</li></ol> <h2 id="_2-5-jestä¸­çš„åŒ¹é…å™¨"><a href="#_2-5-jestä¸­çš„åŒ¹é…å™¨" class="header-anchor">#</a> 2-5 Jestä¸­çš„åŒ¹é…å™¨</h2> <ol><li>åˆ é™¤math.js; math.test.jsæ”¹åå­—ä¸ºmatchers.test.jså¹¶åªä¿ç•™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚( <code>--watchAll</code>ç›‘è§†ä»£ç æ”¹åŠ¨ï¼Œè‡ªåŠ¨æ‰§è¡Œ)</li></ol> <h3 id="å¸¸ç”¨çš„ç±»å‹åŒ¹é…å™¨"><a href="#å¸¸ç”¨çš„ç±»å‹åŒ¹é…å™¨" class="header-anchor">#</a> å¸¸ç”¨çš„ç±»å‹åŒ¹é…å™¨</h3> <ol start="2"><li>toBe æ˜¯åŒ¹é…å™¨ matchers ç±»ä¼¼ object.is ===</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>//å‡å¦‚ç”¨toBeæµ‹è¯•ä»¥ä¸‹å†…å®¹ï¼š
 test('æµ‹è¯•å¯¹è±¡aä¸å¯¹è±¡aç›¸ç­‰', {
     const a = {a: 1};
     expect(a).toBe({a: 1});
 })

 // è¿™é‡Œç”±äºæŒ‡å‘çš„åœ°å€ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚ç±»ä¼¼toBe()è¿™ç§åŒ¹é…å™¨æœ‰å¾ˆå¤šç§ï¼Œä¸‹é¢ä»‹ç»ä¸€ä¸‹
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="3"><li>toEqual () åªåŒ¹é…å†…å®¹ï¼Œä¸åŒ¹é…å¼•ç”¨</li> <li>toBeNull() å¯ä»¥ç”¨æ¥åŒ¹é…null, undefined; å¸ƒå°”ç±»å‹</li> <li>toBeUndefined() å‰è€…åŒ¹é…aæ˜¯æœªå®šä¹‰çš„ï¼› toBeDefined() åè€…åŒ¹é…aæ˜¯å®šä¹‰è¿‡çš„</li> <li>toBeTruthy() åŒ¹é…aæ˜¯å¦ä¸ºçœŸï¼› toBeFalsy()åŒ¹é…aæ˜¯å¦ä¸ºå‡</li> <li>not() å–ååŒ¹é…å™¨</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code> test('notåŒ¹é…å™¨', {
    const a = 1;
    expect(a).not.toBeFalsy();
    expect(a).toBeTruthy();
 })

 // aå–falseçš„åå€¼ï¼Œå°±ç›¸å½“äºaä¸ºtrue
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="8"><li>Jestä¸­æœ‰å¾ˆå¤šè¿™ç§åŒ¹é…å™¨ï¼Œæˆ‘ä»¬ä¸éœ€è¦éƒ½è®°ä½ï¼Œåªéœ€è¦è®°ä½å…¶ä¸­æ ¸å¿ƒçš„å‡ ä¸ªåŒ¹é…å™¨å³å¯ã€‚</li></ol> <h3 id="å¸¸ç”¨çš„æ•°å­—ç›¸å…³çš„åŒ¹é…å™¨"><a href="#å¸¸ç”¨çš„æ•°å­—ç›¸å…³çš„åŒ¹é…å™¨" class="header-anchor">#</a> å¸¸ç”¨çš„æ•°å­—ç›¸å…³çš„åŒ¹é…å™¨ï¼š</h3> <ol><li>toBeGreaterThan()  åŒ¹é…countæ¯”æœŸæœ›å€¼å¤§</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>test('toBeGreaterThan', {
    const count = 10;
    expect(count).toBeGreaterThan(9);
})

//åŒ¹é…countæ¯”æœŸæœ›å€¼9å¤§
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="2"><li>toBeLessThan() åŒ¹é…countæ¯”æœŸæœ›å€¼å°</li> <li>toBeGreaterThanOrEqual() åŒ¹é…countå¤§äºç­‰äºæœŸæœ›å€¼</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>test('toBeGreaterThanOrEqual', {
    const count = 10;
    expect(count).toBeGreaterThanOrEqual(10);
})

// é€šè¿‡
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="4"><li>toBeLessThanOrEqual() åŒ¹é…countå°äºç­‰äºæœŸæœ›å€¼</li> <li>toBeCloseTo() åŒ¹é…æµ®ç‚¹æ•°ç›¸åŠ å‡çš„è¿ç®—</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>test('toBeCloseTo', {
    const a = 0.1;
    const b = 0.2;
    expect(a+ b).toBeCloseTo(0.3);
})

// é€šè¿‡ï¼Œåœ¨jsä¸­å­˜åœ¨æµ®ç‚¹æ•°æº¢å‡ºçš„æƒ…å†µï¼Œä¸èƒ½ç”¨toEqual()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="å¸¸ç”¨çš„å­—ç¬¦ä¸²ç›¸å…³çš„åŒ¹é…å™¨"><a href="#å¸¸ç”¨çš„å­—ç¬¦ä¸²ç›¸å…³çš„åŒ¹é…å™¨" class="header-anchor">#</a> å¸¸ç”¨çš„å­—ç¬¦ä¸²ç›¸å…³çš„åŒ¹é…å™¨</h3> <ol><li>toMathch() åŒ¹é…å˜é‡ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå­—ç¬¦ä¸²</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>test('toBeCloseTo', {
    const str = 'http://www.Allan-Liu.com';
    expect(str).toBeMatch('Allan-Liu');//é€šè¿‡
    expect(str).toBeMatch(/Allan-Liu/);//é€šè¿‡
    expect(str).toBeMatch(/AllanLiu/); //å¤±è´¥
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="å¸¸ç”¨çš„æ•°ç»„ç›¸å…³çš„åŒ¹é…å™¨"><a href="#å¸¸ç”¨çš„æ•°ç»„ç›¸å…³çš„åŒ¹é…å™¨" class="header-anchor">#</a> å¸¸ç”¨çš„æ•°ç»„ç›¸å…³çš„åŒ¹é…å™¨</h3> <ol><li>toContain() åŒ¹é…æ•°ç»„ä¸­æ˜¯å¦åŒ…å«æŸä¸€é¡¹ ï¼ˆæ¯”è¾ƒå¸¸ç”¨ï¼‰</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>test('toContain', {
    const arr = ['www', 'Allan', 'Liu'];
    // æˆ–è€… const arr1 = new Set(arr); ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼ˆsetå’Œæ•°ç»„ä¸åŒä¹‹å¤„ï¼šå…ƒç´ éƒ½æ˜¯å”¯ä¸€ï¼‰ 
    expect(arr).toContain('Allan');//é€šè¿‡
    expect(arr).toContain(/AllanLiu/); //å¤±è´¥
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="å¸¸ç”¨çš„å¤„ç†å¼‚å¸¸æƒ…å†µçš„åŒ¹é…å™¨"><a href="#å¸¸ç”¨çš„å¤„ç†å¼‚å¸¸æƒ…å†µçš„åŒ¹é…å™¨" class="header-anchor">#</a> å¸¸ç”¨çš„å¤„ç†å¼‚å¸¸æƒ…å†µçš„åŒ¹é…å™¨</h3> <ol><li>toThrow()</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>const throwNewErrorFunc = () =&gt; {
    Throw new Error('this is a new error');
}

test('toThrow', {   
    expect(throwNewErrorFunc).toThrow() // é€šè¿‡
    expect(throwNewErrorFunc).toThrow('this is a new error') // é€šè¿‡
    expect(throwNewErrorFunc).toThrow('aaa') // å¤±è´¥ï¼Œå¿…é¡»è¦ä¸€è‡´
    expect(throwNewErrorFunc).toThrow(/this is a new error/) // é€šè¿‡ï¼Œæ­£åˆ™ä¹Ÿæ˜¯å¯ä»¥çš„
})

//throwNewErrorFunc()æ˜¯å¼‚å¸¸å‡½æ•°ï¼ŒtoThrow()ä¸è¯¥å‡½æ•°åŒ¹é…
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="ä»¥ä¸Šå¹¶ä¸æ˜¯jestä¸­å…¨éƒ¨çš„åŒ¹é…å™¨-äº†è§£è¯¦æƒ…è¯·æˆ³jestå®˜ç½‘-äº†è§£æ›´å¤šè¯·æˆ³jestå®˜ç½‘"><a href="#ä»¥ä¸Šå¹¶ä¸æ˜¯jestä¸­å…¨éƒ¨çš„åŒ¹é…å™¨-äº†è§£è¯¦æƒ…è¯·æˆ³jestå®˜ç½‘-äº†è§£æ›´å¤šè¯·æˆ³jestå®˜ç½‘" class="header-anchor">#</a> ä»¥ä¸Šå¹¶ä¸æ˜¯Jestä¸­å…¨éƒ¨çš„åŒ¹é…å™¨ï¼Œäº†è§£è¯¦æƒ…è¯·æˆ³<a href="https://jestjs.io/docs/en/using-matchers" target="_blank" rel="noopener noreferrer">Jestå®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œäº†è§£æ›´å¤šè¯·æˆ³<a href="https://jestjs.io/docs/zh-Hans/expect" target="_blank" rel="noopener noreferrer">Jestå®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <h2 id="_2-6-jestå‘½ä»¤è¡Œå·¥å…·çš„ä½¿ç”¨"><a href="#_2-6-jestå‘½ä»¤è¡Œå·¥å…·çš„ä½¿ç”¨" class="header-anchor">#</a> 2-6 Jestå‘½ä»¤è¡Œå·¥å…·çš„ä½¿ç”¨</h2> <ol><li>ç”¨å‘½ä»¤è¡Œå¯åŠ¨vscodeï¼Œåœ¨<code>ctrl+shift+p</code>ä¸­æœç´¢ä¸‹è½½install code command in PATHã€‚å¦‚æœæœä¸åˆ°æœ‰å¯èƒ½å·²ç»æ·»åŠ å®Œæˆäº†ã€‚å¦‚ä¸‹å›¾ï¼š<br> <img src="https://i.loli.net/2019/11/19/tHrxfmj8Vw2okMG.png" alt="å¾®ä¿¡å›¾ç‰‡_20191119122327.png"></li> <li>è¿è¡Œnpm run testæ—¶ï¼Œ å‘½ä»¤è¡Œä¸€äº›æŒ‰é”®çš„ä½œç”¨ï¼š ï¼ˆå¿…é¡»æ˜¯ä½¿ç”¨gitä»£ç ç®¡ç†ï¼ŒJestæ‰çŸ¥é“å“ªäº›æ˜¯æ”¹å˜çš„æ–‡ä»¶ï¼‰ <br>
f: åªæµ‹è¯•ä¹‹å‰æ²¡æœ‰é€šè¿‡çš„ç”¨ä¾‹ï¼Œé€šè¿‡çš„ä¸åœ¨æµ‹è¯•ã€‚å†æ¬¡ç‚¹å‡»fé€€å‡ºæ¨¡å¼<br>
a: ä»»ä½•ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶å‘ç”Ÿäº†æ”¹å˜ï¼Œè¿è¡Œæ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹<br>
o: å½“æ›´æ”¹ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œåªè¿è¡Œè¿™ä¸ªæ–‡ä»¶é‡Œçš„æµ‹è¯•ç”¨ä¾‹<br>
t: è¿‡æ»¤æ¨¡å¼ï¼Œè¾“å…¥ä¸€ä¸ªå•è¯ï¼Œæ‰§è¡Œä»¥è¯¥å•è¯ç»“å°¾çš„ç”¨ä¾‹<br>
q: é€€å‡ºå¯¹ä»£ç çš„ç›‘æ§<br>
Enterï¼šæŒ‰å›è½¦é‡æ–°è¿è¡Œæµ‹è¯• <br>
p: ç­›é€‰ï¼Œ æ–‡ä»¶å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ ¹æ®æ–‡ä»¶åç§°åŒ¹é…å…³é”®è¯<br></li></ol> <h2 id="_2-7-å¼‚æ­¥ä»£ç çš„æµ‹è¯•æ–¹æ³•"><a href="#_2-7-å¼‚æ­¥ä»£ç çš„æµ‹è¯•æ–¹æ³•" class="header-anchor">#</a> 2-7 å¼‚æ­¥ä»£ç çš„æµ‹è¯•æ–¹æ³•</h2> <ol><li>å½“å¼‚æ­¥å‡½æ•°è°ƒç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°æ—¶ï¼Œè¯¥å¦‚ä½•ç¼–å†™æµ‹è¯•ç”¨ä¾‹</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>const fetchData = (fn) =&gt; {
  axios.get('******').then((res) =&gt; {
    fn(res.data)
  })
}

æµ‹è¯•ç”¨ä¾‹ï¼š 
test( &quot;fetchDataå‡½æ•°çš„æµ‹è¯•ç”¨ä¾‹ï¼š&quot;, (done) =&gt; {
  fetchData((data) =&gt; {
    expect(data).toEqual({
      sucess: true
    })
    done()      // è¡¨æ˜ç”¨ä¾‹æ‰§è¡Œç»“æŸçš„ä½ç½®ï¼Œå¦åˆ™ä¼šæå‰ç»“æŸç”¨ä¾‹çš„æ‰§è¡Œ
  })
})

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ol start="2"><li>å½“å¼‚æ­¥å‡½æ•°è¿”å›ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œæµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>const fetchData = () =&gt; {
  return axios.get('******')
}

æµ‹è¯•ç”¨ä¾‹ï¼š
test( &quot;fetchDataè¿”å›ç»“æœä¸º{ sucess: true }&quot;, () =&gt; {
  return fetchData().then((res) =&gt; {
    expect(res.data).toEqual({
      sucess: true
    })
  })
})

test( &quot;fetchDataè¿”å›ç»“æœä¸º404&quot;, () =&gt; {
  expect.assertion(1);                // assertion(1) è¡¨ç¤ºjestä¼šæ‰§è¡Œ1æ¬¡æ–­è¨€
  return fetchData().catch((e) =&gt; {
    expect(e.toString().indexOf('404) &gt; -1).toBe(true)
  })
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_2-11-jestä¸­çš„mock"><a href="#_2-11-jestä¸­çš„mock" class="header-anchor">#</a> 2-11 Jestä¸­çš„Mock</h2> <ol><li>jest.fn()å¯ä»¥ç”¨æ¥è¿›è¡Œå‡½æ•°æ¨¡æ‹Ÿ</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code> * jest.fn()çš„ä½œç”¨ 
 * 1. æ•è·å‡½æ•°çš„è°ƒç”¨å’Œç»“æœ å·²ç»thisæŒ‡å‘å’Œæ‰§è¡Œé¡ºåº mock()
 * 2. å¯ä»¥è‡ªç”±è®¾ç½®è¿”å›ç»“æœ mockReturnValue()ã€mockReturnValueOnce()
 * 3. å¼‚æ­¥è·å–æ•°æ®æ”¹å˜ä¸ºåŒæ­¥æ¨¡æ‹Ÿæ•°æ® mockResolvedValue()ã€mockResolvedValueOnce()
 * 
 * mockå‡½æ•°ï¼š
 * mockImplementation()
 * mockImplementationOnce()æ–¹æ³•ç­‰ä»·äºjest.mock()ä¸­çš„ () =&gt; {}, å¯ä»¥å¤„ç†é€»è¾‘
 * toBeCallWidth() æ¯ä¸€æ¬¡çš„è°ƒç”¨ç»“æœ
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>è¿˜æœ‰å…¶ä»–çš„ä¸€äº›å‡½æ•°ï¼Œè¯¦ç»†å¯ä»¥å‚è€ƒ<a href="https://jestjs.io/zh-Hans/docs/api" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="jestå­¦ä¹ æš‚åœ"><a href="#jestå­¦ä¹ æš‚åœ" class="header-anchor">#</a> Jestå­¦ä¹ æš‚åœ</h3></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/23/2021, 5:05:10â€¯PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.c845f69d.js" defer></script><script src="/assets/js/2.bd4d3fea.js" defer></script><script src="/assets/js/1.09a35a94.js" defer></script><script src="/assets/js/44.766d7dcf.js" defer></script>
  </body>
</html>
